<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>Questão 3</title>
</head>

<body>
    <form name="formEntrada">
        <div>
            <label>Nome: <input type="text" name="nome" /></label>
            <label>Idade: <input type="text" name="idade" /></label>
            <input type="submit" name="enviar" />
        </div>
    </form>
    <p>
        Adulto:
    </p>
    <ul id="adultos"></ul>
    <p>
        Estudante:
    </p>
    <ul id="estudantes"></ul>
    <script>
        var adultos = [];
        var estudantes = [];
        var formEntrada = document.forms.formEntrada;
        var enviar = formEntrada.enviar;
        var excluir = formEntrada.excluir;
        var listaEstudantes = document.querySelector("#estudantes");
        var listaAdultos = document.querySelector("#adultos");
        var nome = formEntrada.nome;
        var idade = formEntrada.idade;
        enviar.addEventListener("click", function adicionarNaLista(e) {
            e.preventDefault()
            //impede de criar elemento sem valor e idade que não seja número
            if (nome.value != "" && idade.value != "" && !isNaN(Number(idade.value))) {
                //cria um novo elemento com um listener nele
                var pessoa = {
                    n: nome.value,
                    i: idade.value
                };
                if (Number(idade.value) >= 18) {
                    adultos.push(pessoa);
                    atualizaAdultos();

                } else {
                    estudantes.push(pessoa);
                    atualizaEstudantes();
                }

                formEntrada.reset();
            }
        });
        function atualizaAdultos() {
            listaAdultos.children = "";
            for (var i = 0; i < adultos.length; i++) {
                var novoElemento = document.createElement("li");
                novoElemento.innerHTML = "<span>" + adultos[i].n + "</span> - <span>" + adultos[i].i + "</span>";
                novoElemento.addEventListener("click", function editar() {
                    var botao = document.createElement("button");
                    botao.textContent = "Excluir";
                    botao.addEventListener("click", function excluir(e) {
                       console.log("cliquei"); 
                    })
                    novoElemento.appendChild(botao);
                    var editaveis = novoElemento.querySelectorAll("span");
                    for (var i = 0; i < editaveis.length; i++) {
                        editaveis[i].contentEditable = true;
                    }
                });
                listaAdultos.appendChild(novoElemento);
            }
        }
        function atualizaEstudantes() {
            listaEstudantes.children = "";
            for (var i = 0; i < estudantes.length; i++) {
                var novoElemento = document.createElement("li");
                novoElemento.innerHTML = "<span>" + estudantes[i].n + "</span> - <span>" + estudantes[i].i + "</span>";
                novoElemento.addEventListener("click", function editar() {
                    var editaveis = novoElemento.querySelectorAll("span");
                    for (var i = 0; i < editaveis.length; i++) {
                        editaveis[i].contentEditable = true;
                    }
                });
                listaEstudantes.appendChild(novoElemento);
            }
        }
    </script>
</body>

</html>
