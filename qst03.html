<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>Questão 3</title>
</head>

<body>
    <form name="formEntrada">
        <div>
            <label>Nome: <input type="text" name="nome" /></label>
            <label>Idade: <input type="text" name="idade" /></label>
            <input type="submit" name="enviar" />
            <input type="hidden" name="excluir" />
        </div>
    </form>
    <p>
        Adulto:
    </p>
    <ul id="adultos"></ul>
    <p>
        Estudante: 
    </p>
    <ul id="estudantes"></ul>
    <script>
        var formEntrada = document.forms.formEntrada;
        var enviar = formEntrada.enviar;
        var excluir = formEntrada.excluir;
        var listaEstudantes = document.querySelector("#estudantes");
        var listaAdultos = document.querySelector("#adultos");
        var nome = formEntrada.nome;
        var idade = formEntrada.idade;
        enviar.addEventListener("click", function adicionarNaLista(e) {
            e.preventDefault()
            //impede de criar elemento sem valor e idade que não seja número
            if (nome.value != "" && idade.value != "" && !isNaN(Number(idade.value))) {
                //cria um novo elemento com um listener nele
                var novoElemento = document.createElement("li");
                novoElemento.innerHTML = "<span>" + nome.value + "</span> - <span>" + idade.value + "</span>";
                novoElemento.addEventListener("click", function editar() {
                    excluir.type = "button";
                    var editaveis = novoElemento.querySelectorAll("span");
                    for(var i = 0; i < editaveis.length; i++){
                        editaveis[i].contentEditable = true;
                    }
                });
                novoElemento.addEventListener("mouseleave", function cancelarEdicao() {
                    excluir.type = "hide";
                    var editaveis = novoElemento.querySelectorAll("span");
                    for(var i = 0; i < editaveis.length; i++){
                        editaveis[i].contentEditable = false;
                    }
                });
                if (Number(idade.value) >= 18) {
                    listaAdultos.append(novoElemento);
                } else {
                    listaEstudantes.append(novoElemento);
                }
                formEntrada.reset();
            }
        });
    </script>
</body>

</html>